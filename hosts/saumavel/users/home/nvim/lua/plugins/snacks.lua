-- ============================================================================
-- Snacks.nvim Configuration
-- ============================================================================
-- Collection of small utilities including dashboard, picker, and more
return {
    "folke/snacks.nvim",
    event = "VimEnter",
    enabled = true,
    opts = {
        -- ====================================================================
        -- Picker Configuration
        -- ====================================================================
        picker = {
            sources = {
                recent = {
                    filter = {
                        cwd = true,
                    },
                },
            },
        },

        -- ====================================================================
        -- Dashboard Configuration
        -- ====================================================================
        dashboard = {
            enabled = true,
            width = 60,
            row = nil,
            col = nil,
            pane_gap = 4,
            autokeys = "1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",

            -- ----------------------------------------------------------------
            -- Preset Configuration
            -- ----------------------------------------------------------------
            preset = {
                -- ASCII art header for dashboard
                header = [[
.__________________________________________________________________________________________________________________________________________________. 
|        .-"""-.      _______________________________________________________________________________________________________        .-"""-.       | 
|I AM A /  \___ \     |   |\_/|   ,================.P ''  |1100001010100111000111010100|  '' P _________________    |\_/|   | i am  /  \___ \      | 
|MAGNI- |/`    \|     |  / o o\   |\HELLTARI_00100/| L''  |‡‡‡‡ÞgG‡``````````````ül***¯|  ''L /' ,__________,  '\  / o o\   |  not  |/`    \|      | 
|FICENT (  x  x )     |  /(   )\  |.--------------.|  E'  |66GÅÆ````***```3l`ü*```ü33‡*|  'E  | '            `  |  /(   )\  | muscu-(  a  a )      | 
|BEAST! |   _\ |OHHHHH|  / \#/ \  ||[ _    .  _ ]_||  'A  |Æ````````````````````‹¯*`6`‡|  A'  | |  WELCOME   |  |  / \#/ \  | lar --|   _\ |   ohhh| 
|    -- )\  (_)/--YEAH|  |     |  |`--------------'|  ''S |``‹```gÆÆÆÆÆÆÆÆÆÆÆÆÆÆÆ````Çü| S''  | |    TO      |  |  |     |  | enough)\  o  /--noooo| 
|   _.-'  '---;   BABY|  | | | |  ||  I   C   U   ||  '' E|``````‹gÆgGgGÆgÅÆÅÆÆÆÆÆ````ü|E ''  | |  HEEEELL!  |  |  | | | |  |   _.-'  '---;   don't| 
| /`           `-.    |(~\ | | /~)|`------------_-'|K ''  |Æ``````ÆÆÆÆÆÆÆÆÆÆÆÆÆÆÆÆÆ``¯Ç|  '' K| |            |  |(~\ | | /~)| /`           `-.watch| 
||                \   |_\_|| ||_/_||[=====| o  (@) | I''  |Æ````6ÞÆÆÆÆÆÆgGG```````Æ``¯‹|  ''I | `,__________,'  |_\_|| ||_/_||                \ me | 
||    | ' .  & . ' \  |_//_| |_\\_|`------'/u\ --- |  I'  |ÆÇ```````````ÆÆ‹``````ÆÆÆ`Æ`|  'I  |    _______      |_//_| |_\\_||    |   .  & .   \   | 
|\    /   {  & } |  ; |   |||||   |----------------|  'I  |Æ``````‹`ÆÆ``ÆÆÆÆÆÆÆÆÆÆÆÅ`Æ`|  L'  |<> [___=___](@)<>|   |||||   |\    /      &   |  ;  | 
||   |    {  | } |  ; |  ||. .||  | (/)          []|  ''L |gÆ```6ÆÆÆÆÆ```ÆÆÆÆÆÆÆÅÆÆ`ÆÆ`| L''  ':________________/  ||. .||  ||   |           |  ;  | 
||   /\   {  | } /  | | |||\=/||| |---===--------==|  '' L|‡ÅÇ```¯ÆÆÆ````Æ``ÆgGÅÆÆÆ`Æ``|L ''    (____________)    |||\=/||| ||   /\          /  |  | 
|\   \ )   -:-  /\  \ | |.-- --.| |WELCOME/\/\/\/\/|M ''  |üÇÅÆ```‡ÆÆ‹```ÆÆÆÆÆÆÆÆÆG```*|  '' M ___________/______ |.-- --.| |\   \ )   -:-  /\  \  | 
| `.  `-'./\`\) | \  \| /(.) (.)\ |/\/\/\/\TO/\/\/\| E''  |‡‡3Å``````````6`````ÆÆÅÆ`¯*¯|  ''E /''''=========='(@)\/(.) (.)\ | `.  `-.  -:-  | \  \_| 
|   '-.___\/_/) ) './\`\\ ) . ( / |\/\/\/\/\/\HELL||  E'  |l‡üü```‹gÇÞ`GÆgÆÆÆÆ`Ggü``‡l*|  'E  |[][][][][][][][][]|\ ) . ( / |   '-.  `-.    (  './\`\
|    /    $$$$  )   \/_/'(  v  )` |/\/\/\/\/\/\/\/\|  'E  |6‡ü6l`````*`*ÆÅÆÆ63```ÅÆ```Ç|  E'  |[][][][][][][][][]|'(  v  )` |    / `'-. `\  |    \/_/
|    (   (\  /) |   B |   \ | /   |================|  ''E |336Å`````````````````‹ÆÆ```Æ| E''  |[][][][][][][][][]|  \ | /   |    |    \  |  |     l| 
|   ,=""=,|' |  /   I |   ( | )  .'                `. ''  |_____,--.!,  _  .!,--,______|! ''  \------------------/  ( | )   |   ,=""=,/'-\  /     i| 
|  c , _,{|  |  |   G |  __,_____,          .-=='/~\         __/   -*- .-. -*-   \__         .-=='/~\          , ______,__  |  c , _,{\   | |     l| 
|  /\  @ )( .)  |     | / __.==--"______,_)/   /{~}}}/__)_ ,d08b.  '|`(o.o)'|`  ,d08b.,/__)-/   /{~}}}_/_,___/__"--==.__  \ |  /\  @ ) )_/\ |      | 
| /  ^~~^\ ||   |   B |/#(-'--,-------,---,\'-' {{~}}---,- 0088MM      |O|      0088MM ---,_\'-' {{~}}-------,---,---'-)#\ \| /  ^~~^\     \|     b| 
|(_/ ,, ,,)||   |   E |`-'                  '-==.\}/       `9MMP'     __|__     `9MMP'       '-==.\}/                    '-'|(_/ ,, ,,)     \     e| 
| ~\_(/-\)'||   |   N |_____________________________________________________________________________________________________| ~\_(/-\)'     '.    n| 
|__________________________________________________________________________________________________________________________________________________| 
]],
                -- --------------------------------------------------------
                -- Dashboard Key Actions
                -- --------------------------------------------------------
                keys = {
                    {
                        icon = "󰋚",
                        key = "r",
                        desc = "Recent Files",
                        action = ":lua Snacks.dashboard.pick('oldfiles')",
                    },
                    {
                        icon = "󰈞 ",
                        key = "f",
                        desc = "Find File",
                        action = ":lua Snacks.dashboard.pick('files')",
                    },
                    {
                        icon = "󰊄",
                        key = "g",
                        desc = "Find Text",
                        action = ":lua Snacks.dashboard.pick('live_grep')",
                    },
                    {
                        icon = "󰮗",
                        key = "c",
                        desc = "Config",
                        action = ":lua Snacks.dashboard.pick('files', {cwd = vim.fn.stdpath('config')})",
                    },
                    {
                        icon = "󰉋",
                        key = "e",
                        desc = "Open Oil",
                        action = ":lua require('oil').open()",
                    },
                    {
                        icon = "󰒲",
                        key = "l",
                        desc = "Lazy",
                        action = ":Lazy",
                        enabled = package.loaded.lazy ~= nil,
                    },
                    {
                        icon = "󰒲",
                        key = "x",
                        desc = "Lazy Extra",
                        action = ":LazyExtra",
                        enabled = package.loaded.lazy ~= nil,
                    },
                    {
                        icon = "󰗼",
                        key = "q",
                        desc = "Quit",
                        action = ":qa",
                    },
                },
            },
            -- ----------------------------------------------------------------
            -- Format Configuration
            -- ----------------------------------------------------------------
            formats = {
                key = { "%s", align = "center" },
                desc = { "%s", align = "center" },
                icon = { "%s", align = "center" },
            },

            -- ----------------------------------------------------------------
            -- Layout Sections
            -- ----------------------------------------------------------------
            sections = {
                -- Header section
                {
                    section = "header",
                    pane = 1,
                },
                -- Keys section (positioned below header)
                {
                    section = "keys",
                    gap = 1,
                    padding = 1,
                    pane = 1,
                    align = "center",
                    row = 20,
                },
                -- Startup info section (positioned below keys)
                {
                    section = "startup",
                    pane = 1,
                    row = 30,
                },
            },
        },
    },

    -- ========================================================================
    -- Setup Function
    -- ========================================================================
    config = function(_, opts)
        require("snacks").setup(opts)
    end,
}
